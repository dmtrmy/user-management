<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="icon" href="/favicon.png" type="image/x-icon">
</head>
<body>
    <!-- This section shows if the user is not logged in -->
    <div id="loginRequired" style="display: none;">
        <h3>You need to log in to access the admin area.</h3>
        <a href="/login.html">Go to Login</a>
    </div>

    <!-- This section shows the admin dashboard if the user is logged in and authorized -->
    <div id="dashboardDiv" style="display: none;">
        <h1>Admin Dashboard</h1>
        <!-- Logout Button -->
        <button id="logoutBtn" onclick="logOut()">Logout</button>
        <table id="userTable">
            <thead>
                <tr>
                    <th>UUID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Street</th>
                    <th>House Number</th>
                    <th>Postal Code</th>
                    <th>City</th>
                    <th>Date Created</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be populated dynamically -->
            </tbody>
        </table>
    </div>
    <!-- Edit User Modal -->
    <div id="editModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Edit User</h2>
            <form id="editUserForm">
                <input type="hidden" id="editUserId">
                
                <div class="form-group">
                    <label for="editUserName">Name:</label>
                    <input type="text" id="editUserName" required>
                </div>

                <div class="form-group">
                    <label for="editUserEmail">Email:</label>
                    <input type="email" id="editUserEmail" required>
                </div>

                <div class="form-group">
                    <label for="editUserStreet">Street:</label>
                    <input type="text" id="editUserStreet">
                </div>

                <div class="form-group">
                    <label for="editUserHouseNumber">House Number:</label>
                    <input type="text" id="editUserHouseNumber">
                </div>

                <div class="form-group">
                    <label for="editUserPostalCode">Postal Code:</label>
                    <input type="text" id="editUserPostalCode">
                </div>

                <div class="form-group">
                    <label for="editUserCity">City:</label>
                    <input type="text" id="editUserCity">
                </div>

                <div class="button-group">
                    <button type="button" onclick="saveUser()">Save</button>
                    <button type="button" onclick="closeEditModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

   <!-- Loading the Supabase script -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>
<!-- Link to external JavaScript file -->
<script src="admin.js"></script>
</body>
</html>